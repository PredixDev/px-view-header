sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
env:
  global:
  - secure: RSs4E1C4BzMH2K9TIkM7vjoZD2e0H3JVPL8nSwHnW94na6OlzCYh4BaQILaKMnETsZepxECVZH2Ud6EIQLDr9aYjhbfajccUmqd13mru5FbPL+OSvE0pmHcEjGNfkwg/EAtt+KQ0nISNTfCLmgZJRXk4CU/J2wAgz0Tscj6/9w402WymHyvsYSh1uUocWGnqKeUogdPaKQTJP9MO4GYnbj/XF93V9obd6Hlw8hRebFZUhtmaUsX5lH2pX7yriXdNNUUKl0wI7SSXIXay6eimsrK1ZpDdARzzMpvscoj+WxA+f3uh53IXtW23BuKqsEEtP7OAv2KJd9gJ51DUSJPJSKT0PuFsqnqsPoyNG+4+FW5TwybXJbgHImIHvPpwZkKRT7g4COmhptTx7OX35nU3SHX1+YqZme+WrCfxBOxiQKqJIo2WvcPDctcHZ/MQnqDxaLF2NrK26u1H1TgJ+84QAStVLOqKJYNPiOmUwtqljniAFg5B73kq/200qS+BGIGs21UmHh3PAnYrRCDbirUjAqD85Gtm8gAzlNUHdosPGEZc2/BPrL6HPS4/MoLudf76KasDJ5Lza1TQy2DKoIDYVwVnCkrk1NFlhJb/owPaGcXUVm/NDV3nm2I4qaxEynbqERvE1kB1Mv5zGE+Pdo26vldWdmrIjo5QuwJY7dLLtC0=
  - secure: rJSXG0S2uk3RjngQv9NK3jgHR4LYsHiyh7GU2jo8XBgxIqY0ffBGvXHatw3/t3ycv7/roE3wzlRO/+kdIqODzxQDETq4wQxxIy+YtBS6U4MeXDfuv85TGgCjz6rvsbkx+/qQbuJGzelJzbWNq6/BxVs4n3Yf8hGlAKX1YPnCaiQNh0E28FTsidUMohV7N8nI58qtWQWKPNfRQBviDm0JkyOl846KTL1nzbQaY2PWqV0lfLBQxhrbpcj/DgjVvzGRYD7GvudZNR/FGfYykPHHMeHK3o2P/UIncfvvs9DY+pw8/YmVJdCRz0iuXM9kQS3WG3CDO6W+CcpXv7BHkogzNS7P2OYlBT3wJNXxlGrcWPPuGvGBgV2BJvJDxwoj+pp7RMhh+vQETY/Jo1v7jCw1h4bjL69a3xCbpHJJmXqY49JpdOnb9GD+WVUkbq9snPVn7OkeCEqFytf8S4pJOxT1Tve0UyrhghtyxZTWcOzqi7HI/NW1U+mBLHtuX7/p845Hz1O8sx1Ly4ngmDp5/PO8ETl93dYJZeTB2IshZdq8BveKcL+yMlHocknY7usCCgRGhbpbW/zXgW6Do4aWDPGpC9CAG3rdL9CJCgEtrHztV5NciBaDAP9w9ergqoABAU+X/CQA6cBn0B9AgrZU4bAy7em8c9n3TRXCooCS/7yvBQU=
